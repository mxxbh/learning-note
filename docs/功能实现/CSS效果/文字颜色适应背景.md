# 文字颜色适应背景

<style module>
  .docsExample {
    flex-direction: column;
  }
  .docsExample form {
    display: flex;
    gap: 5px;
  }
  .docsExample legend {
    margin: 0 0 -5px 5px;
  }
  .docsExample .template {
    /* 定义 RGB 变量 */
    --red: 250;
    --green: 135;
    --blue: 255;
    /** 亮度算法：lightness = (red * 0.2126 + green * 0.7152 + blue * 0.0722) / 255 */
    --lightness: calc((var(--red) * 0.2126 + var(--green) * 0.7152 + var(--blue) * 0.0722) / 255);
    padding: 10px 30px;
    background: rgb(var(--red), var(--green), var(--blue));
    /* 文字颜色，只可能是黑色或白色 */
    color: hsl(0, 0%, calc((var(--lightness) - 0.5) * -999999%));
    /* 文字阴影，黑色文字才会出现 */
    text-shadow: 1px 1px rgba(calc(var(--red) + 50), calc(var(--green) + 50), calc(var(--blue) + 50), calc((var(--lightness) - 0.5) * 9999));
    /* 边框样式，亮度大于 0.8 才出现 */
    border-color: rgba(calc(var(--red) - 50), calc(var(--green) - 50), calc(var(--blue) - 50), calc((var(--lightness) - 0.8) * 100));
  }
</style>

## 方式一

根据数学关系计算颜色亮度。

<div :class='["docs-example", $style.docsExample]'>
  <div ref="template" :class="$style.template">Hover</div>
  <form>
    <fieldset>
      <legend>R</legend>
      <input @change="changeColor($event, '--red')" type="range" min="0" max="255" />
    </fieldset>
    <fieldset>
      <legend>G</legend>
      <input @change="changeColor($event, '--green')" type="range" min="0" max="255" />
    </fieldset>
    <fieldset>
      <legend>B</legend>
      <input @change="changeColor($event, '--blue')" type="range" min="0" max="255" />
    </fieldset>
  </form>
</div>

<script setup>
  import { ref, onMounted } from 'vue';

  const template = ref();

  const changeColor = (event, name) => {
    template.value.style.setProperty(name, event.target.value);
  }
</script>

```html
<style>
  .template {
    /* 定义 RGB 变量 */
    --red: 250;
    --green: 135;
    --blue: 255;
    /** 亮度算法：lightness = (red * 0.2126 + green * 0.7152 + blue * 0.0722) / 255 */
    --lightness: calc((var(--red) * 0.2126 + var(--green) * 0.7152 + var(--blue) * 0.0722) / 255);
    background: rgb(var(--red), var(--green), var(--blue));
    /* 文字颜色，只可能是黑色或白色 */
    color: hsl(0, 0%, calc((var(--lightness) - 0.5) * -999999%));
    /* 文字阴影，黑色文字才会出现 */
    text-shadow: 1px 1px rgba(calc(var(--red) + 50), calc(var(--green) + 50), calc(var(--blue) + 50), calc((var(--lightness) - 0.5) * 9999));
    /* 边框样式，亮度大于 0.8 才出现 */
    border-color: rgba(calc(var(--red) - 50), calc(var(--green) - 50), calc(var(--blue) - 50), calc((var(--lightness) - 0.8) * 100));
  }
</style>
<div ref="template" class="template">Hover</div>
<form>
  <fieldset>
    <legend>R</legend>
    <input @change="changeColor($event, '--red')" type="range" min="0" max="255" />
  </fieldset>
  <fieldset>
    <legend>G</legend>
    <input @change="changeColor($event, '--green')" type="range" min="0" max="255" />
  </fieldset>
  <fieldset>
    <legend>B</legend>
    <input @change="changeColor($event, '--blue')" type="range" min="0" max="255" />
  </fieldset>
</form>

<script setup>
  import { ref, onMounted } from 'vue';

  const template = ref();

  const changeColor = (event, name) => {
    template.value.style.setProperty(name, event.target.value);
  }
</script>
```